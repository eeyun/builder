digraph STATES {

  ranksep=0.2;

////////////////////////////////////////////////////////////////////////
// Group states
node[fontname="Courier", shape=oval];
Triggered;
Created;
Queued;
Dispatching;
Complete;
FailureCleanup;
Failed;
Cancelling;
Cancelled;

Triggered -> Created;
Triggered -> Failed;
Triggered -> Cancelled;

Created -> Queued;
Created -> Failed;
Created -> Cancelled;

Queued -> Dispatching;
Queued -> Cancelled;

Dispatching -> Complete;
Dispatching -> FailureCleanup;
Dispatching -> Cancelling;

FailureCleanup -> Failed;

Cancelling -> Cancelled;

////////////////////////////////////////////////////////////////////////
// Job states
node[fontname="Courier", shape=box];
Pending;
Dispatched;
Schedulable;
Eligible;
Built;
JobFailed;
DependencyFailed;
CancelPending;
CancelComplete;

Pending -> Schedulable;
Pending -> CancelComplete;

Schedulable -> Eligible;
Schedulable -> DependencyFailed;
Schedulable -> CancelComplete;

Eligible -> Dispatched;
Eligible -> CancelComplete;
Eligible -> DependencyFailed;

Dispatched -> Built; // Complete
Dispatched -> JobFailed; // FatalError
Dispatched -> Eligible; // NonFatalError
Dispatched -> CancelPending;

CancelPending -> CancelComplete;

// Cross FSM relationships
{rank=same; Created Pending}
{rank=same; Dispatching Eligible}

{rank=same; Complete FailureCleanup Cancelling CancelPending DependencyFailed }

}
